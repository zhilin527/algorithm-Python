# 1. 虚拟机技术
![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/vm_structure.png)

## 1.1 Hypervisor:虚拟机监视软件
划分为两类：
1.这种直接运行在物理硬件之上的,比如基于内核的虚拟机 KVM, Linux 内核的一个模块
2.运行在另一个操作系统之上，比如 QEMU, WINE, VMware QEMU 多用来做 CPU 仿真, 做调试

## 1.2 Hypervisor 作用
多部署
资源池，共享主机资源
资源隔离

# 2. 容器Docker
![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/docker.png)

## 2.1 docker应用场景
- 标准化的迁移方式，开发打包资源文件给运维，运维展开放到对应的资源节点的服务器上
- 统一的参数配置，打包时的参数配置都是一样的
- 自动化部署
- 应用集群监控
- 开发和运维之间的沟通桥梁

## 2.2 docker 概述
### 2.2.1 docker作用
开发和部署环境不一样
windows上开发，Linux部署，开发打包(jar+redis+es)部署上线.

## 2.3 docker 安装
### 2.3.1 docker的组成
![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/docker_structure.png)
- **镜像image**
一个模板，可以通过这个模板创建容器，tomcat镜像==>run==>tomcat01容器（提供服务器），
通过这个镜像创建多个容器，最终服务是运行在容器中的。
- **容器container**
启动，停止，删除，基本命令
可以把一个容器理解为一个简易的linux系统
- **仓库reporepository**
仓库就是存放镜像的地方
仓库分为公有仓库和私有仓库。

### 2.3.2 ubuntu 安装命令
- ***卸载旧版本***

```sudo apt-get remove docker docker-engine docker.io containerd runc```
- ***安装依赖***

```sudo apt-get update```
```sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release```

- ***添加docker key***

```curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg```

- ***设置ubuntu系统对应稳定版***

```echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu``` \
```$(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null```

- ***安装docker***

```sudo apt-get update```
```sudo apt-get install docker-ce docker-ce-cli containerd.io```

- ***卸载docker***

```sudo apt-get purge docker-ce docker-ce-cli containerd.io```

```sudo rm -rf /var/lib/docker```
```sudo rm -rf /var/lib/containerd```

- ***运行 hello-world***

- ***使用阿里云容器镜像加速服务***

```https://cr.console.aliyun.com/cn-beijing/instances/mirrors```

阿里云控制台 - 产品与服务 - 弹性计算 - 容器镜像服务 - 镜像工具 - 镜像加速器

- ***docker run 运行流程***

![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/docker_run.png)

### 2.3.3 底层原理

- ***docker 怎么工作***

![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/docker_how_to_work.png)
client-server 形式的

- ***docker 为什么比 VM 快***

![Image in doc_img may be lost.](https://raw.githubusercontent.com/zhilin527/algorithm-Python/master/doc/doc_img/docker_and_vm.png)
1. docker 抽象层更少
2. docker 利用的是宿主机的内核，vm 需要 Guest OS
